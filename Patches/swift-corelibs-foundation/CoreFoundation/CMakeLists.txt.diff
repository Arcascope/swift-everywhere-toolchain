diff --git a/CoreFoundation/CMakeLists.txt b/CoreFoundation/CMakeLists.txt
index 4fe2766d..15ef3d87 100644
--- a/CoreFoundation/CMakeLists.txt
+++ b/CoreFoundation/CMakeLists.txt
@@ -315,11 +315,18 @@ add_framework(CoreFoundation
                 URL.subproj/CFURLComponents.c
                 URL.subproj/CFURLComponents_URIParser.c
                 URL.subproj/CFURLSessionInterface.c)
-if(CMAKE_SYSTEM_NAME STREQUAL Linux OR CMAKE_SYSTEM_NAME STREQUAL Android)
+if(CMAKE_SYSTEM_NAME STREQUAL Android)
   target_compile_definitions(CoreFoundation
                              PRIVATE
+                               -DDEPLOYMENT_TARGET_ANDROID
                                -DDEPLOYMENT_TARGET_LINUX
+                               -D__ANDROID__
                                -D_GNU_SOURCE)
+elseif(CMAKE_SYSTEM_NAME STREQUAL Linux)
+  target_compile_definitions(CoreFoundation
+                           PRIVATE
+                             -DDEPLOYMENT_TARGET_LINUX
+                             -D_GNU_SOURCE)
 elseif(CMAKE_SYSTEM_NAME STREQUAL FreeBSD)
   target_compile_definitions(CoreFoundation
                              PRIVATE
@@ -371,6 +378,9 @@ target_compile_definitions(CoreFoundation
 target_include_directories(CoreFoundation
                            PRIVATE
                              ${CMAKE_SOURCE_DIR})
+target_include_directories(CoreFoundation PRIVATE ${CMAKE_SOURCE_DIR}/../)
+target_include_directories(CoreFoundation PRIVATE ${CMAKE_SOURCE_DIR}/Base.subproj/SwiftRuntime)
+
 if(NOT CMAKE_SYSTEM_NAME STREQUAL Darwin)
   find_package(LibXml2 REQUIRED)
   target_include_directories(CoreFoundation
@@ -390,11 +400,11 @@ if(CF_ENABLE_LIBDISPATCH)
                              PRIVATE
                                ${CF_PATH_TO_LIBDISPATCH_SOURCE}
                                ${CF_PATH_TO_LIBDISPATCH_BUILD}/tests)
-  if(NOT CMAKE_SYSTEM_NAME STREQUAL Darwin)
+#   if(NOT CMAKE_SYSTEM_NAME STREQUAL Darwin)
     target_include_directories(CoreFoundation
                                SYSTEM PRIVATE
                                  ${CF_PATH_TO_LIBDISPATCH_SOURCE}/src/BlocksRuntime)
-  endif()
+#   endif()
 endif()
 
 if("${CMAKE_C_SIMULATE_ID}" STREQUAL "MSVC")
@@ -427,9 +437,9 @@ if(CF_DEPLOYMENT_SWIFT)
                            PRIVATE
                              /clang:-fcf-runtime-abi=swift)
   else()
-    target_compile_options(CoreFoundation
-                           PRIVATE
-                             -fcf-runtime-abi=swift)
+    # target_compile_options(CoreFoundation
+    #                        PRIVATE
+    #                          -fcf-runtime-abi=swift)
   endif()
 endif()
 
